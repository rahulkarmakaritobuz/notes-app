<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Notes</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="app-name">Notes app</div>
    <div class="popup-box">
      <div class="popup">
        <div class="popup-content">
          <header>
            <p>Add new notes</p>
            <span class="close">Close</span>
            <!-- <i class="fa fa-times" aria-hidden="true"></i> -->
          </header>
          <form action="#">
            <div class="title">
              <input type="text" spellcheck="false" placeholder="Title" />
            </div>
            <div class="description">
              <textarea placeholder="Take a note..."></textarea>
            </div>

            <div class="button-container">
              <button class="add">Add Note</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="popup-background"></div>
    <!-- <div>
      <textarea></textarea>
      <div>
        <input type="color" id="head" name="head" value="#e66465" />
        <label for="head"></label>
      </div>
    </div> -->
    <div class="wrapper">
      <li class="add-box">
        <div class="icon"><i class="fa-solid fa-plus"></i></div>
        <p>Add new note</p>
      </li>
    </div>

    <script>
      const popUpBox = document.querySelector(".popup-box");
      const titleTag = document.querySelector("input");
      const descriptionTag = document.querySelector("textarea");
      const popupBackground = document.querySelector(".popup-background");

      const showMenu = (elem) => {
        console.log("hello");
        console.log(elem);
        elem.parentElement.classList.add("show");
        document.addEventListener("click", (e) => {
          if (e.target.tagName != "I" || e.target != elem) {
            elem.parentElement.classList.remove("show");
          }
        });
      };

      const deleteData = async (api) => {
        await fetch(api, {
          method: "DELETE",
          headers: {
            "Content-type": "application/json",
          },
        });
        console.log("Resource deleted...");
      };

      const deleteNote = (noteId) => {
        console.log("delete Note");
        let api = "http://localhost:8080/delete/" + noteId;
        console.log(api);
        let confirmDel = confirm("Are you sure you want to delete this note?");
        if (!confirmDel) return;
        deleteData(api);
      };

      const update = (noteId, title, desc) => {
        console.log("update Note");
        isUpdate = true;
        let api = "http://localhost:8080/note/" + noteId;
        popUpBox.classList.add("show");
        popupBackground.classList.add("show");
        titleTag.focus();
        titleTag.value = title;
        descriptionTag.value = desc;
        setTimeout(() => {
          deleteData("http://localhost:8080/delete/" + noteId);
        }, 3000);
      };
    </script>
    <!-- <script src="./js/main.js"></script> -->
  </body>
</html>
